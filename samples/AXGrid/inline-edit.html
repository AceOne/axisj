<!DOCTYPE html>
<html lang="ko">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1.0, minimum-scale=1" />
	<title>AXGrid - AXISJ</title>

    <link rel="shortcut icon" href="../../ui/axisj.ico" type="image/x-icon" />
    <link rel="icon" href="../../ui/axisj.ico" type="image/x-icon" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../ui/AXJ.png" />
    <link rel="apple-touch-icon-precomposed" href="../../ui/AXJ.png" />
    <meta property="og:image" content="/samples/_img/axisj_sns.png" />
    <meta property="og:site_name" content="Axis of Javascript - axisj.com" />
    <meta property="og:description" id="meta_description" content="Javascript UI Library based on JQuery" />

    <!-- css block -->
    <link rel="stylesheet" type="text/css" href="http://cdn.axisj.com/axicon/axicon.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="../../ui/arongi/page.css" />
    <link rel="stylesheet" type="text/css" href="../../ui/arongi/AXJ.min.css" />
    <link rel="stylesheet" type="text/css" href="../../ui/arongi/AXGrid.css" />

    <style type="text/css">
    </style>
    <!-- css block -->

    <!-- js block -->
    <script type="text/javascript" src="../../jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../dist/AXJ.min.js"></script>
	<script type="text/javascript" src="../../lib/AXUtil.js"></script>
    <script type="text/javascript" src="../../lib/AXGrid.js"></script>
    <script type="text/javascript" src="../../lib/AXInput.js"></script>
    <script type="text/javascript" src="../page.js"></script>
    <script type="text/javascript" src="pageTab.js"></script>

    <script src="http://newdoc.axisj.com/scripts/prettify/prettify.js"></script>
    <script src="http://newdoc.axisj.com/scripts/prettify/lang-css.js"></script>

    <link type="text/css" rel="stylesheet"  href="http://newdoc.axisj.com/styles/prettify-jsdoc.css">

    <!-- js block -->
	<style type="text/css">
	
	</style>
</head>
	
<body>

<div id="AXPage">

	<div id="AXPageBody" class="SampleAXSelect">
        <div id="demoPageTabTarget" class="AXdemoPageTabTarget"></div>
		<div class="AXdemoPageContent">

            <div id="grid0">
                <h2>AXGrid</h2>
                <div id="AXGridTarget" style="height:300px;"></div>
                <div style="padding:10px;">

                    <input type="button" value="getSelectedItem" class="AXButton" onclick="fnObj.grid.getSelectedItem();" />
                </div>
            </div>

            <div id="printout"></div>

<pre class="prettyprint linenums">
...
// 그리드의 cloGrop에 editor 속성을 추가 하여 인라인 에디팅을 지원하는 방식
colGroup : [
    {
        key:"no", label:"번호", width:"50", align:"right"
    },
    {
        key:"title", label:"제목", width:"200",
        tooltip:function(){
            return this.item.no + "." + this.item.title + "/" + this.key + "/" + this.value;
        },
        editor: {
            type: "finder", // type finder는 input옆에 돋보기 아이콘이 내장되고 아이콘을 누르는 이벤트는 finder.onclick에서 연결
            finder: {
                onclick: function(){
                    var val = window.prompt("값 입력해주세요.");
                    jQuery("#" + this.id).val(val).setCaret();
                }
            }
        }
    },
    {
        key:"writer", label:"작성자", width:"100",
        editor: {
            formatter: "dec",
            type: "select",
            options:[
                {value:1, optionText:"옵션1"},
                {value:2, text:"옵션2"}
            ],
            beforeUpdate: function(val){ // 수정이 되기전 value를 처리 할 수 있음.
                return val.replace(/\./g, "") + "."; // 업데이트 되는 value를 연산 처리 할 수 있습니다.
            },
            afterUpdate: function(val){ // 수정이 처리된 후
                // 수정이 된 후 액션.
                console.log(this);
            }
        }
    },
    {
        key:"regDate", label:"작성일", width:"105", align:"center",
        editor: {
            type: "calendar"
        }
    },
    {
        key:"price", label:"가격", width:"100", align:"right",
        formatter:"money",
        editor: {
            type: "money",
            updateWith: ["cost"]
        }
    },
    {
        key:"amount", label:"수량", width:"80", align:"right",
        formatter:"money",
        editor: {
            type: "number",
            updateWith: ["cost"]
        }
    },
    {
        key:"cost", label:"금액", width:"100", align:"right",
        formatter:function(){
            return (this.item.price.number() * this.item.amount.number()).money();
        }
    },
    {
        key:"desc", label:"비고", width:"200",
        editor: {
            formatter: "dec",
            type: "text"
        }
    },
	{
	    key:"chk", label:"체크", width:"50", align:"center",
	    editor: {
	        type: "checkbox"
	    }
	},
	{
	    key:"rad", label:"라디오", width:"50", align:"center",
	    editor: {
	        type: "radio"
	    }
	}
],
</pre>

		</div>
	</div>

</div>

<script>
    /**
     * Require Files for AXISJ UI Component...
     * Based		: jQuery
     * Javascript 	: AXJ.js, AXGrid.js, AXInput.js, AXSelect.js
     * CSS			: AXJ.css, AXGrid.css, AXButton.css, AXInput.css, AXSelect.css
     */
    var pageID = "inline-edit";
    var fnObj = {
        pageStart: function(){
            fnObj.grid.bind();
            prettyPrint();
        },
        grid: {
            target: new AXGrid(),
            bind: function(){
                window.myGrid = fnObj.grid.target;

	            /*
                myGrid.setConfig({
                    targetID : "AXGridTarget",
                    sort:false,
                    //fitToWidth:true, // 너비에 자동 맞춤

                    colGroup : [
                        {key:"no", label:"번호", width:"50", align:"right"},
	                    {
		                    key:"_CUD", label:"상태", width:"50", align:"center"
	                    },
                        {
                            key:"title", label:"제목", width:"200",
	                        formatter: function(){
		                      return "<u>" + this.item.title + "</u>";
		                        
	                        },
                            tooltip:function(){
                                return this.item.no + "." + this.item.title + "/" + this.key + "/" + this.value;
                            },
                            editor: {
                                type: "text",
	                            updateWith: ["_CUD"]
                            }
                        },
                        {
                            key:"writer", label:"작성자", width:"100",
                            editor: {
                                formatter: "dec",
                                type: "select",
                                options:[
                                    {value:1, optionText:"옵션1"},
                                    {value:2, text:"옵션2"}
                                ],
                                beforeUpdate: function(val){ // 수정이 되기전 value를 처리 할 수 있음.
                                    return val.replace(/\./g, "") + "."; // 업데이트 되는 value를 연산 처리 할 수 있습니다.
                                },
                                afterUpdate: function(val){ // 수정이 처리된 후
                                    // 수정이 된 후 액션.
                                    console.log(this);
                                }
                            }
                        },
                        {
                            key:"regDate", label:"작성일", width:"105", align:"center",
                            editor: {
                                type: "calendar"
                            }
                        },
                        {
                            key:"price", label:"가격", width:"100", align:"right",
                            formatter:"money",
                            editor: {
                                type: "money",
                                updateWith: ["cost"]
                            }
                        },
                        {
                            key:"amount", label:"수량", width:"80", align:"right",
                            formatter:"money",
                            editor: {
                                type: "number",
                                updateWith: ["cost"]
                            }
                        },
                        {
                            key:"cost", label:"금액", width:"100", align:"right",
                            formatter:function(){
                                return (this.item.price.number() * this.item.amount.number()).money();
                            }
                        },
	                    {
		                    key:"chk", label:"체크", width:"50", align:"center",
		                    editor: {
			                    type: "checkbox"
		                    }
	                    },
	                    {
		                    key:"rad", label:"라디오", width:"50", align:"center",
		                    editor: {
			                    type: "radio"
		                    }
	                    },
                        {
                            key:"desc", label:"비고", width:"200",
                            editor: {
                                formatter: "dec",
                                type: "text"
                            }
                        }
                    ],
                    colHeadAlign: "center", // 헤드의 기본 정렬 값 ( colHeadAlign 을 지정하면 colGroup 에서 정의한 정렬이 무시되고 colHeadAlign : false 이거나 없으면 colGroup 에서 정의한 속성이 적용됩니다.
                    body : {
                        onclick: function(){
                            //trace(this.index);
                        }
                    },
                    page: {
                        paging: false
                    }
                });
	*/
	            myGrid.setConfig({
		            targetID : "AXGridTarget",
		            sort:false,
		            colGroup : [
			            {
				            key:"no", label:"No", width:"50", align:"center"
			            },
			            {
				            key:"status", label:"상태", width:"40", align:"center", formatter:function(){
				            if(this.item._CUD == "C"){
					            return "신규";
				            }else if(this.item._CUD == "D"){
					            return "삭제";
				            }else if(this.item._CUD == "U"){
					            return "수정";
				            }
			            },
				            editor:{
					            type:"text"
				            }
			            },
			            {
				            key:"cdType", label:"코드유형", width:"70", align:"center",
				            editor: {
					            formatter: "dec",
					            type: "text",
					            updateWith: ["status"]
				            }
				
			            },
			            {
				            key:"cdName", label:"코드유형명칭", width:"200",
				            tooltip:function(){
					            return this.item.no + "." + this.item.title + "/" + this.key + "/" + this.value;
				            },
				            editor: {
					            formatter:"dec",
					            type: "text",
					            updateWith: ["status"]
				            }
			            },
			            {
				            key:"mEditor", label:"현업수정", width:"100", align:"center",
				            editor: {
					            type: "checkbox"
				            }
			            }
		            ],
		            colHeadAlign: "center", // 헤드의 기본 정렬 값 ( colHeadAlign 을 지정하면 colGroup 에서 정의한 정렬이 무시되고 colHeadAlign : false 이거나 없으면 colGroup 에서 정의한 속성이 적용됩니다.
		            body : {
			            onclick: function(){
				            //alert(this.item.cdType);
				            //toast.push(Object.toJSON({index:this.index, item:this.item}));
				            //alert(this.cdType.val());
				            //detailDB( this.item.cdType, subsyscode);
				
			            }
		            },
		            page: {
			            paging: false
		            },
		            editor: {
			            rows: [
				            [
					            {
						            key:"no", colSeq:0, align:"left", valign:"middle", form:{type:"text", value:"itemValue"}, AXBind:{type:"number", config:{min:1, max:100}}
					            },
					            {
						            key:"state", colSeq:1, align:"left", valign:"middle", form:{type:"text", value:"itemValue"}, AXBind:{type:"text"}
					            },
					            {
						            key:"cdType", colSeq:2, align:"left", valign:"middle", form:{type:"text", value:"itemValue"}, AXBind:{type:"text"}
					            },
					            {
						            key:"cdName", colSeq:3, align:"left", valign:"middle", form:{type:"text", value:"itemValue"}, AXBind:{type:"text"}
					            },
					            {
						            key:"mEditor", colSeq:4, align:"center", valign:"middle", form:{type:"checkbox", value:"itemValue", options:[{value:true, text:''}]}
					            }
				            ]
			            ],
			            //request:{ajaxUrl:"saveGrid.php", ajaxPars:"param1=1&param2=2"},
			            response: function(){ // ajax 응답에 대해 예외 처리 필요시 response 구현
				            // response에서 처리 할 수 있는 객체 들
				            //trace({res:this.res, index:this.index, insertIndex:this.insertIndex, list:this.list, page:this.page});
				            alert(myGrid.list.length);
				            for(var i=0; i<myGrid.list.length; i++){
					            if(myGrid.list[i]._CUD =="C"){
						            alert("aaa");
						
					            }
				            }
				            return;
				            if(this.error){
					            trace(this);
					            return;
				            }
				
				            trace(this.res.item);
				
				            if(this.index == null){ // 추가
					            var pushItem = this.res.item;
					            //pushItem 에 추가 값 지정 가능
					            if(this.res.item.title == ""){
						            alert("제목이 비어 추가 할 수 없습니다.");
						            return false;
					            }
					            insertNewCode($("#largecode").val(), $("#midgcode").val(), this.res.item.cdType, this.res.item.cdName, this.res.item.mEditor,subsyscode);
					            trace(pushItem, this.insertIndex);
					            myGrid.pushList(pushItem, this.insertIndex);
				            }else{ // 수정
					            //trace(this.res.item);
					            AXUtil.overwriteObject(this.list[this.index], this.res.item, true); // this.list[this.index] object 에 this.res.item 값 덮어쓰기
					            myGrid.updateList(this.index, this.list[this.index]);
				            }
				
			            },
			            onkeyup: function(event, element){
				            if(event.keyCode == 13 && element.name != "title") myGrid.saveEditor();
				            else if(event.keyCode == 13 && element.name == "title") myGrid.focusEditorForm("regDate");
			            }
		            },
		            contextMenu: {
			            theme:"AXContextMenu", // 선택항목
			            width:"150", // 선택항목
			            menu:[
				            {
					            userType:1, label:"추가하기", className:"plus", onclick:function(){
					            myGrid.appendList(null);
				            }
				            },
				            {
					            userType:1, label:"삭제하기", className:"minus", onclick:function(){
					            if(this.sendObj){
						            if(!confirm("정말 삭제 하시겠습니까?")) return;
						            var removeList = [];
						            removeList.push({no:this.sendObj.item.no});
						            myGrid.removeList(removeList); // 전달한 개체와 비교하여 일치하는 대상을 제거 합니다. 이때 고유한 값이 아닌 항목을 전달 할 때에는 에러가 발생 할 수 있습니다.
					            }
				            }
				            },
				            {
					            userType:1, label:"수정하기", className:"edit", onclick:function(){
					            //trace(this);
					            if(this.sendObj){
						            myGrid.setEditor(this.sendObj.item, this.sendObj.index);
					            }
				            }
				            }
			            ],
			            filter:function(id){
				            return true;
			            }
		            }
	            });
	            
	            

                var list = [
                    {no:1, title:"AXGrid 첫번째 줄 입니다.", writer:"김기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:1709401, amount:10, chk:1}, // item
                    {no:2, title:"AXGrid 두번째 줄 입니다.", writer:"정기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12300.00, amount:7, chk:true},
                    {no:3, title:"AXGrid 세번째 줄 입니다.", writer:"한기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12000, amount:5, chk:false},
                    {no:4, title:"AXGrid 세번째 줄 입니다.", writer:"박기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:13000, amount:4},
                    {no:5, title:"AXGrid 세번째 줄 입니다.", writer:"곽기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:3000, amount:3},
                    {no:6, title:"AXGrid 세번째 줄 입니다.", writer:"문기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:123000, amount:2},
                    {no:7, title:"AXGrid 세번째 줄 입니다.", writer:"소기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:129500, amount:1},
                    {no:8, title:"AXGrid 첫번째 줄 입니다.", writer:"재기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:123000, amount:10},
                    {no:9, title:"AXGrid 두번째 줄 입니다.", writer:"원기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12300, amount:7},
                    {no:10, title:"AXGrid 세번째 줄 입니다.", writer:"고기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12000, amount:5},
                    {no:11, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:13000, amount:4},
                    {no:12, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:3000, amount:3},
                    {no:13, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:123000, amount:2},
                    {no:14, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:129500, amount:1},
                    {no:15, title:"AXGrid 두번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12300, amount:7},
                    {no:16, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:12000, amount:5},
                    {no:17, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:13000, amount:4},
                    {no:18, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:3000, amount:3},
                    {no:19, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:123000, amount:2},
                    {no:20, title:"AXGrid 세번째 줄 입니다.", writer:"장기영", regDate:"2013-01-18", desc:"myGrid.setList 의 첫번째 사용법 list json 직접 지정 법", price:129500, amount:1}
                ];
                myGrid.setList(list);
                //trace(myGrid.getSortParam());

            },
            getExcel: function(type){
                var obj = myGrid.getExcelFormat(type);
                trace(obj);
                $("#printout").html(Object.toJSON(obj));
            },
            getSelectedItem: function(){
                trace( this.target.getSelectedItem() );
                toast.push('콘솔창에 데이터를 출력하였습니다.');
            }
        }
    };
    jQuery(document.body).ready(function() {
        fnObj.pageStart();
    });

</script>

</body>
</html>		
